<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Agility Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* MODIFICATION: Card is now a flex container, no manual overflow needed here */
        .card {
            background-color: white;
            border-radius: 1.5rem;
            padding: 2rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transition: all 0.3s ease-in-out;
            /* The card itself is now a flex column */
            display: flex;
            flex-direction: column;
            /* Prevents the card from exceeding the container's height */
            max-height: 95vh; 
        }
        .btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            border: 1px solid #e5e7eb;
            background-color: #f9fafb;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            /* Add flex-shrink to prevent buttons from growing too large */
            flex-shrink: 0;
        }
        .btn:hover {
            background-color: #f3f4f6;
            border-color: #d1d5db;
        }
        .btn.selected {
            background-color: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        .progress-bar-bg {
            background-color: #e5e7eb;
            border-radius: 9999px;
            height: 0.75rem;
        }
        .progress-bar-fg {
            background-color: #3b82f6;
            border-radius: 9999px;
            height: 0.75rem;
            transition: width 0.5s ease-in-out;
        }
        /* Custom scrollbar for the new scrollable areas */
        .scrolling-content::-webkit-scrollbar {
            width: 8px;
        }
        .scrolling-content::-webkit-scrollbar-track {
            background: transparent;
        }
        .scrolling-content::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 10px;
        }
        .scrolling-content::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div id="game-container" class="max-w-2xl w-full h-full flex items-center">
        
    <div id="welcome-screen" class="card w-full">
            <div class="flex-shrink-0">
                <h1 class="text-3xl text-center font-bold text-gray-800 mb-4">Change Agility Challenge</h1>
            </div>
            <div class="scrolling-content flex-grow min-h-0 overflow-y-auto pr-2">
                <p class="text-gray-600 mb-6">Test your skills in navigating the ever-changing landscape of todayâ€™s workplace. You will be presented with 10 scenarios. <strong>There are no right or wrong answers, choose the response that best reflects how you would act.</strong> </p>
                <p class="text-gray-600 mb-8">Your results will reveal your strengths across five key skills: Adaptability, Resilience, Change Leadership, Learning Agility, and Innovation.</p>
            </div>
            <div class="mt-auto flex-shrink-0">
                 <div class="mb-4">
                    <input type="text" id="name-input" placeholder="Enter your name to begin" class="w-full px-4 py-3 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <p id="name-error" class="text-red-500 text-sm mt-2 hidden">Please enter your name to start.</p>
                </div>
                <button id="start-btn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-lg transition-transform transform hover:scale-105">Start the Challenge</button>
            </div>
        </div>

        <div id="game-screen" class="card hidden w-full">
            <div class="flex-shrink-0">
                <div class="mb-6">
                    <p id="question-counter" class="text-sm font-medium text-gray-500 mb-2">Question 1 / 10</p>
                    <div class="progress-bar-bg">
                        <div id="progress-bar" class="progress-bar-fg" style="width: 10%;"></div>
                    </div>
                </div>
                <h2 id="scenario-text" class="text-xl font-semibold text-gray-800 mb-6">Scenario text goes here.</h2>
            </div>
            <div id="options-container" class="scrolling-content flex-grow min-h-0 overflow-y-auto space-y-4 pr-2">
                </div>
        </div>

        <div id="results-screen" class="card hidden w-full">
            <div class="flex-shrink-0 text-center">
                <h1 id="results-title" class="text-3xl font-bold text-gray-800 mb-4">Your Change Agility Profile</h1>
                <p class="text-gray-600 mb-8">Here is a breakdown of your skills based on your responses. This profile highlights your strengths in navigating change.</p>
            </div>
            <div class="scrolling-content flex-grow min-h-0 overflow-y-auto pr-2">
                <div class="w-full min-h-[320px] md:min-h-[384px] mx-auto mb-8">
                    <canvas id="results-chart"></canvas>
                </div>
                <div id="skill-breakdown" class="space-y-4">
                    </div>
            </div>
            <div class="mt-auto flex-shrink-0">
                <button id="restart-btn" class="mt-8 w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-lg transition-transform transform hover:scale-105">Play Again</button>
            </div>
        </div>
    </div>

<script>
    // --- (JavaScript is unchanged) ---
    // --- DOM Elements ---
    const welcomeScreen = document.getElementById('welcome-screen');
    const gameScreen = document.getElementById('game-screen');
    const resultsScreen = document.getElementById('results-screen');
    const startBtn = document.getElementById('start-btn');
    const restartBtn = document.getElementById('restart-btn');
    const nameInput = document.getElementById('name-input');
    const nameError = document.getElementById('name-error');
    const questionCounter = document.getElementById('question-counter');
    const progressBar = document.getElementById('progress-bar');
    const scenarioText = document.getElementById('scenario-text');
    const optionsContainer = document.getElementById('options-container');
    const resultsChartCanvas = document.getElementById('results-chart');
    const resultsTitle = document.getElementById('results-title');
    const skillBreakdownContainer = document.getElementById('skill-breakdown');

    // --- Game Data ---
    const SKILLS = {
        ADAPTABILITY: 'Adaptability',
        RESILIENCE: 'Resilience',
        CHANGE_LEADERSHIP: 'Change Leadership',
        LEARNING_AGILITY: 'Learning Agility',
        INNOVATION: 'Innovation'
    };

    const SKILL_DESCRIPTIONS = {
        [SKILLS.ADAPTABILITY]: 'Having strength in this skill means readily adjusting your approach and mindset to fit new situations, embracing shifts in priorities and processes.',
        [SKILLS.RESILIENCE]: 'Having strength in this skill means maintaining a positive attitude and bouncing back quickly from setbacks, and viewing challenges as opportunities for growth.',
        [SKILLS.CHANGE_LEADERSHIP]: 'Having strength in this skill means effectively guiding and influencing others through transitions, building consensus and motivating others.',
        [SKILLS.LEARNING_AGILITY]: 'Having strength in this skill means that being proactive about acquiring new knowledge and skills, actively seek feedback and learning from experiences.',
        [SKILLS.INNOVATION]: 'Having strength in this skill means thinking outside the box to generate novel ideas and creative solutions to complex problems.'
    };
    
    const questions = [
        {
            scenario: "Your team's long-term project is suddenly canceled due to a shift in company strategy. How do you react?",
            options: [
                { text: "Immediately start brainstorming how your project's assets could be repurposed for the new strategy.", skill: SKILLS.INNOVATION },
                { text: "Acknowledge the disappointment but quickly refocus on understanding the new strategy and how your team can contribute.", skill: SKILLS.ADAPTABILITY },
                { text: "Organize a team meeting to discuss the news, validate feelings, and collectively plan the next steps.", skill: SKILLS.CHANGE_LEADERSHIP },
                { text: "View it as a tough but valuable lesson, and analyze the situation to see what you can learn for future projects.", skill: SKILLS.RESILIENCE }
            ]
        },
        {
            scenario: "A new software is being introduced that completely changes your daily workflow. What's your first move?",
            options: [
                { text: "Schedule time to explore the software's advanced features beyond the required training to see how it can improve efficiency.", skill: SKILLS.LEARNING_AGILITY },
                { text: "Focus on mastering the new system as quickly as possible to maintain your productivity levels.", skill: SKILLS.ADAPTABILITY },
                { text: "Experiment with the new software to find unconventional ways to solve old problems.", skill: SKILLS.INNOVATION },
                { text: "Offer to help colleagues who are struggling with the transition, sharing tips and tricks you've discovered.", skill: SKILLS.CHANGE_LEADERSHIP }
            ]
        },
        {
            scenario: "Your team receives critical feedback on a major deliverable, requiring significant rework. What is your response?",
            options: [
                { text: "Acknowledge the setback, rally the team's spirits, and emphasize what can be learned from the feedback.", skill: SKILLS.RESILIENCE },
                { text: "Take the lead in breaking down the feedback and delegating tasks to ensure the rework is efficient and effective.", skill: SKILLS.CHANGE_LEADERSHIP },
                { text: "Analyze the feedback to identify core misunderstandings or knowledge gaps that need to be addressed.", skill: SKILLS.LEARNING_AGILITY },
                { text: "Use the feedback as a catalyst to rethink the original approach and propose a more creative and robust solution.", skill: SKILLS.INNOVATION }
            ]
        },
        {
            scenario: "Your company is merging with another, bringing in new colleagues with very different work cultures. How do you approach this?",
            options: [
                { text: "Propose a joint 'innovation jam' to combine ideas from both cultures and solve a shared problem.", skill: SKILLS.INNOVATION },
                { text: "Make an effort to understand the new culture and adjust your communication style to build bridges.", skill: SKILLS.ADAPTABILITY },
                { text: "Volunteer to be part of a committee that helps integrate the two teams and establish new, shared norms.", skill: SKILLS.CHANGE_LEADERSHIP },
                { text: "Actively seek out colleagues from the other company to learn about their processes and perspectives.", skill: SKILLS.LEARNING_AGILITY }
            ]
        },
        {
            scenario: "A key team member quits unexpectedly during a critical phase of a project. What do you do?",
            options: [
                { text: "Remain calm, reassure the team that you'll get through this, and quickly re-distribute the workload.", skill: SKILLS.RESILIENCE },
                { text: "Step up to coordinate the team's response, ensuring clear communication and that all responsibilities are covered.", skill: SKILLS.CHANGE_LEADERSHIP },
                { text: "See this as an opportunity for others (including yourself) to step up and learn new skills to cover the gap.", skill: SKILLS.LEARNING_AGILITY },
                { text: "Adjust your team's workflow and priorities to accommodate the change with minimal disruption.", skill: SKILLS.ADAPTABILITY }
            ]
        },
        {
            scenario: "You're asked to lead a project in an area you have very little experience in. What's your take?",
            options: [
                { text: "Accept the challenge enthusiastically, viewing it as a prime opportunity to rapidly develop new competencies.", skill: SKILLS.LEARNING_AGILITY },
                { text: "Acknowledge the challenge but focus on your ability to recover from any initial mistakes and learn as you go.", skill: SKILLS.RESILIENCE },
                { text: "Propose an innovative project plan that leverages your existing skills while incorporating new methods you'll learn.", skill: SKILLS.INNOVATION },
                { text: "Adapt your leadership style, relying more on empowering team experts while you get up to speed.", skill: SKILLS.ADAPTABILITY }
            ]
        },
        {
            scenario: "Market conditions have shifted, making your team's current skills less relevant. What do you suggest?",
            options: [
                { text: "Advocate for a formal team upskilling plan, identifying and prioritizing the most critical new skills to learn.", skill: SKILLS.CHANGE_LEADERSHIP },
                { text: "Start a personal project to learn a new, in-demand skill and share your findings with the team.", skill: SKILLS.LEARNING_AGILITY },
                { text: "Brainstorm ways to apply your team's existing skills to new, emerging problems in the market.", skill: SKILLS.INNOVATION },
                { text: "Don't get discouraged by the shift; instead, focus on how the team can pivot and what you can learn from the change.", skill: SKILLS.RESILIENCE }
            ]
        },
        {
            scenario: "A new company-wide policy you disagree with is implemented. How do you handle it?",
            options: [
                { text: "Find a way to work within the new rules while still achieving your team's goals effectively.", skill: SKILLS.ADAPTABILITY },
                { text: "While you may not like it, you help your team understand the rationale behind it and manage their frustrations.", skill: SKILLS.CHANGE_LEADERSHIP },
                { text: "You don't let the frustration derail you; you focus on your work and find ways to stay productive and positive.", skill: SKILLS.RESILIENCE },
                { text: "You try to understand the problem the policy is trying to solve and think of an alternative solution to propose.", skill: SKILLS.INNOVATION }
            ]
        },
        {
            scenario: "Your department is being restructured, and your role is likely to change significantly. What is your primary focus?",
            options: [
                { text: "Proactively talking to leadership to understand the upcoming changes and how you can best prepare for a new role.", skill: SKILLS.LEARNING_AGILITY },
                { text: "Staying optimistic and focusing on the new opportunities the restructuring might bring.", skill: SKILLS.RESILIENCE },
                { text: "Being open-minded and ready to take on whatever new responsibilities come your way.", skill: SKILLS.ADAPTABILITY },
                { text: "Thinking about how the new structure could unlock better ways of working and suggesting these ideas.", skill: SKILLS.INNOVATION }
            ]
        },
        {
            scenario: "An experimental project you championed fails to deliver the expected results. How do you frame this to your superiors?",
            options: [
                { text: "As a valuable learning experience, presenting a clear analysis of what went wrong and what was learned.", skill: SKILLS.RESILIENCE },
                { text: "As a stepping stone, proposing a new, improved iteration based on the lessons from the failure.", skill: SKILLS.INNOVATION },
                { text: "As a data-gathering exercise, focusing on the unexpected insights gained that can be applied elsewhere.", skill: SKILLS.LEARNING_AGILITY },
                { text: "As a leader, taking full responsibility and outlining how you will guide the team to its next success.", skill: SKILLS.CHANGE_LEADERSHIP }
            ]
        }
    ];

    // --- Game State ---
    let currentQuestionIndex = 0;
    let scores = {};
    let chartInstance = null;
    let playerName = '';

    // --- Functions ---

    function initializeScores() {
        scores = {
            [SKILLS.ADAPTABILITY]: 0,
            [SKILLS.RESILIENCE]: 0,
            [SKILLS.CHANGE_LEADERSHIP]: 0,
            [SKILLS.LEARNING_AGILITY]: 0,
            [SKILLS.INNOVATION]: 0
        };
    }

    function startGame() {
        playerName = nameInput.value.trim();
        if (!playerName) {
            nameError.classList.remove('hidden');
            return;
        }
        nameError.classList.add('hidden');

        currentQuestionIndex = 0;
        initializeScores();
        welcomeScreen.classList.add('hidden');
        resultsScreen.classList.add('hidden');
        gameScreen.classList.remove('hidden');
        showQuestion();
    }
    
    function restartGame() {
        resultsScreen.classList.add('hidden');
        welcomeScreen.classList.remove('hidden');
    }

    function showQuestion() {
        if (currentQuestionIndex >= questions.length) {
            showResults();
            return;
        }

        // Update progress
        const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
        questionCounter.textContent = `Question ${currentQuestionIndex + 1} / ${questions.length}`;
        progressBar.style.width = `${progress}%`;

        // Display question
        const question = questions[currentQuestionIndex];
        scenarioText.textContent = question.scenario;
        optionsContainer.innerHTML = '';
        
        // Shuffle options to avoid order bias
        const shuffledOptions = [...question.options].sort(() => Math.random() - 0.5);

        shuffledOptions.forEach(option => {
            const button = document.createElement('button');
            button.className = 'btn';
            button.textContent = option.text;
            button.onclick = () => selectOption(option.skill, button);
            optionsContainer.appendChild(button);
        });
    }

    function selectOption(skill, selectedButton) {
        // Increment score
        scores[skill]++;
        
        // Visual feedback
        const buttons = optionsContainer.querySelectorAll('.btn');
        buttons.forEach(btn => btn.disabled = true); // Disable all buttons
        selectedButton.classList.add('selected');

        // Move to next question after a short delay
        setTimeout(() => {
            currentQuestionIndex++;
            showQuestion();
        }, 1000);
    }

    function showResults() {
        gameScreen.classList.add('hidden');
        resultsScreen.classList.remove('hidden');
        resultsTitle.textContent = `${playerName}'s Change Agility Profile`;
        renderChart();
        renderSkillBreakdown();
    }
    
    function renderChart() {
        const data = {
            labels: Object.values(SKILLS),
            datasets: [{
                label: 'Your Score',
                data: Object.values(scores),
                backgroundColor: 'rgba(59, 130, 246, 0.2)',
                borderColor: 'rgba(59, 130, 246, 1)',
                pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgba(59, 130, 246, 1)',
                borderWidth: 2
            }]
        };

        const config = {
            type: 'radar',
            data: data,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: {
                            color: '#e5e7eb'
                        },
                        grid: {
                            color: '#e5e7eb'
                        },
                        pointLabels: {
                            font: {
                                size: 14,
                                weight: '500'
                            },
                            color: '#374151'
                        },
                        ticks: {
                            backdropColor: 'transparent',
                            stepSize: 1,
                            font: {
                                size: 10
                            }
                        },
                        min: 0,
                        max: Math.max(...Object.values(scores), 3) // Ensure scale is at least 3
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        };

        if (chartInstance) {
            chartInstance.destroy();
        }
        chartInstance = new Chart(resultsChartCanvas, config);
    }

    function renderSkillBreakdown() {
        skillBreakdownContainer.innerHTML = '';
        const sortedSkills = Object.entries(scores).sort(([,a],[,b]) => b-a);
        
        sortedSkills.forEach(([skill, score]) => {
            const skillElement = document.createElement('div');
            skillElement.className = 'p-4 border rounded-lg bg-gray-50';
            
            const scoreDisplay = `(${score} point${score !== 1 ? 's' : ''})`;

            skillElement.innerHTML = `
                <h3 class="font-bold text-lg text-gray-800">${skill} <span class="text-sm font-medium text-gray-500">${scoreDisplay}</span></h3>
                <p class="text-gray-600 mt-1">${SKILL_DESCRIPTIONS[skill]}</p>
            `;
            skillBreakdownContainer.appendChild(skillElement);
        });
    }

    // --- Event Listeners ---
    startBtn.addEventListener('click', startGame);
    restartBtn.addEventListener('click', restartGame);

</script>
</body>
</html>
